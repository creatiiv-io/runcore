table:
  name: accounts
  schema: client
object_relationships:
  - name: domain
    using:
      foreign_key_constraint_on:
        column: account_id
        table:
          name: domains
          schema: client
  - name: language
    using:
      foreign_key_constraint_on: language_code
  - name: referring_account
    using:
      foreign_key_constraint_on: referred_by
array_relationships:
  - name: activations
    using:
      foreign_key_constraint_on:
        column: account_id
        table:
          name: activations
          schema: offer
  - name: client_settings
    using:
      foreign_key_constraint_on:
        column: account_id
        table:
          name: settings
          schema: client
  - name: configs
    using:
      foreign_key_constraint_on:
        column: account_id
        table:
          name: configs
          schema: client
  - name: invitations
    using:
      foreign_key_constraint_on:
        column: account_id
        table:
          name: invitations
          schema: client
  - name: invoices
    using:
      foreign_key_constraint_on:
        column: account_id
        table:
          name: invoices
          schema: offer
  - name: refered_accounts
    using:
      foreign_key_constraint_on:
        column: referred_by
        table:
          name: accounts
          schema: client
  - name: subscriptions
    using:
      foreign_key_constraint_on:
        column: account_id
        table:
          name: subscriptions
          schema: offer
  - name: trigger_hooks
    using:
      foreign_key_constraint_on:
        column: account_id
        table:
          name: hooks
          schema: trigger
  - name: trigger_logs
    using:
      foreign_key_constraint_on:
        column: account_id
        table:
          name: logs
          schema: trigger
  - name: users
    using:
      foreign_key_constraint_on:
        column: account_id
        table:
          name: users
          schema: client
computed_fields:
  - name: settings
    definition:
      function:
        name: accounts_settings
        schema: client
select_permissions:
  - role: agent
    permission:
      columns:
        - id
        - is_active
        - is_deleted
        - language_code
        - name
        - referral_code
      filter:
        users:
          user_id:
            _eq: X-Hasura-User-Id
    comment: ""
  - role: owner
    permission:
      columns:
        - id
        - is_active
        - is_deleted
        - language_code
        - name
        - referral_code
      filter:
        users:
          user_id:
            _eq: X-Hasura-User-Id
    comment: ""
